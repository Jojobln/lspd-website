<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LSPD News</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background-color: #111; color: #ccc; }
    .header { background-color: #0a0a0a; padding: 20px; display: flex; align-items: center; justify-content: space-between; }
    .logo-text { font-size: 22px; color: #00aaff; }
    .hamburger { font-size: 26px; color: #fff; cursor: pointer; display: block; user-select: none; }
    .nav-menu { background-color: #1a1a1a; padding: 10px; display: none; }
    .hidden { display: none !important; }
    .nav-links { list-style: none; padding: 0; margin: 0; }
    .nav-links li { margin: 10px 0; }
    .nav-links a { color: #00aaff; text-decoration: none; font-weight: bold; }
    .nav-links a:hover { text-decoration: underline; }
    .division p { font-size: 16px; line-height: 1.6; color: #fff; margin-top: 8px; }
    .division { background-color: #1e1e1e; border: 1px solid #333; padding: 20px; margin-bottom: 20px; border-radius: 6px; }
    .division h3 { color: #00aaff; margin-top: 0; }
    .footer { text-align: center; padding: 20px; background-color: #0a0a0a; color: #777; }
    .content-section { padding: 30px 20px; max-width: 800px; margin: 0 auto; }
    .nav-menu.show { display: block; }

    @media (min-width: 768px) {
      .nav-menu { display: block !important; background: none; padding: 0; }
      .hamburger { display: none; }
      .nav-links { display: flex; }
      .nav-links li { margin: 0 15px; }
    }

    .news-item { background-color: #1a1a1a; border-radius: 8px; padding: 15px; margin-bottom: 20px; color: white; position: relative; }
    .news-item h3, .news-item p { margin: 0 0 10px 0; }
    .delete-btn, .edit-btn, .save-btn { position: absolute; bottom: 10px; padding: 5px 10px; font-weight: bold; border-radius: 5px; cursor: pointer; font-size: 0.9rem; border: none; }
    .delete-btn { right: 10px; background-color: #f44336; color: white; }
    .edit-btn { right: 90px; background-color: #ff9800; color: white; }
    .save-btn { right: 90px; background-color: #4caf50; color: white; display: none; }

    #news-form, #login-area { background-color: #1a1a1a; padding: 15px; border-radius: 8px; margin-bottom: 20px; color: white; }
    #news-form input, #news-form textarea, #login-area input { width: 100%; padding: 8px; margin-bottom: 10px; border-radius: 5px; border: none; background-color: #333; color: white; }
    #news-form button, #login-area button { background-color: #00aaff; border: none; padding: 10px; cursor: pointer; font-weight: bold; color: #111; border-radius: 5px; }
    #message { color: #f55; margin-top: 5px; }
  </style>
</head>
<body>

<header class="header">
  <div class="container nav-container">
    <h1 class="logo-text">Los Santos Police Department</h1>
    <div class="hamburger" onclick="toggleMenu()">&#9776;</div>
    <nav id="nav-menu" class="nav-menu hidden">
      <ul class="nav-links">
        <li><a href="/lspd-website/uniformen/uniformen.html">Uniformen</a></li>
        <li><a href="/lspd-website/fahrzeuge/fahrzeuge.html">Fahrzeuge</a></li>
        <li><a href="/lspd-website/raenge/raenge.html">Ränge</a></li>
        <li><a href="/lspd-website/divisions/divisions.html">Divisions</a></li>
        <li><a href="/lspd-website/termine/termine.html">Termine</a></li>
        <li><a href="/lspd-website/index.html">Startseite</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="content-section">
  <h2>LSPD News</h2>
  <div id="news-list"></div>

  <div id="login-area">
    <p><strong>News schreiben? Bitte Benutzername und Passwort eingeben:</strong></p>
    <input type="text" id="usernameInput" placeholder="Benutzername" />
    <input type="password" id="passwordInput" placeholder="Passwort" />
    <button onclick="login()">Login</button>
    <p id="message"></p>
  </div>

  <form id="news-form" onsubmit="return addNews();">
    <input type="text" id="news-title" placeholder="Titel" required maxlength="100" />
    <textarea id="news-content" rows="5" placeholder="Inhalt" required maxlength="1000"></textarea>
    <button type="submit">News hinzufügen</button>
  </form>
</section>

<footer class="footer">
  &copy; 2025 RedState fivePD - Alle Rechte vorbehalten.
</footer>

<script>
  const users = [
    { username: "kuura", password: "lspd2025" },
    { username: "pringle", password: "metrosecure" },
    { username: "justin", password: "detective123" }
  ];

  const newsList = document.getElementById("news-list");
  const newsForm = document.getElementById("news-form");
  const loginArea = document.getElementById("login-area");
  const message = document.getElementById("message");

  let loggedIn = false;
  let newsItems = JSON.parse(localStorage.getItem("newsItems")) || [];

  function toggleMenu() {
    document.getElementById("nav-menu").classList.toggle("hidden");
  }

  function saveNewsToStorage() {
    localStorage.setItem("newsItems", JSON.stringify(newsItems));
  }

  function cleanupOldNews() {
    const now = Date.now();
    newsItems = newsItems.filter(item => now - item.timestamp < 1000 * 60 * 60 * 24 * 20);
    saveNewsToStorage();
  }

  function renderNews() {
    cleanupOldNews();
    newsList.innerHTML = "";
    newsItems.forEach((news, index) => {
      const div = document.createElement("div");
      div.classList.add("news-item");

      const titleEl = document.createElement("h3");
      const contentEl = document.createElement("p");
      titleEl.textContent = news.title;
      contentEl.textContent = news.content;

      if (loggedIn) {
        const delBtn = document.createElement("button");
        delBtn.className = "delete-btn";
        delBtn.textContent = "Löschen";
        delBtn.onclick = () => {
          if (confirm(`News "${news.title}" wirklich löschen?`)) {
            newsItems.splice(index, 1);
            saveNewsToStorage();
            renderNews();
          }
        };

        const editBtn = document.createElement("button");
        editBtn.className = "edit-btn";
        editBtn.textContent = "Bearbeiten";

        const saveBtn = document.createElement("button");
        saveBtn.className = "save-btn";
        saveBtn.textContent = "Speichern";

        editBtn.onclick = () => {
          const newTitle = prompt("Neuer Titel:", news.title);
          const newContent = prompt("Neuer Inhalt:", news.content);
          if (newTitle && newContent) {
            newsItems[index].title = newTitle.trim();
            newsItems[index].content = newContent.trim();
            saveNewsToStorage();
            renderNews();
          }
        };

        div.appendChild(editBtn);
        div.appendChild(delBtn);
      }

      div.appendChild(titleEl);
      div.appendChild(contentEl);
      newsList.appendChild(div);
    });
  }

  function login() {
    const username = document.getElementById("usernameInput").value.trim().toLowerCase();
    const password = document.getElementById("passwordInput").value;
    const user = users.find(u => u.username === username && u.password === password);
    if (user) {
      loggedIn = true;
      message.style.color = "lightgreen";
      message.textContent = `Erfolgreich eingeloggt als ${user.username}.`;
      loginArea.style.display = "none";
      newsForm.style.display = "block";
      renderNews();
    } else {
      message.style.color = "#f55";
      message.textContent = "Falscher Benutzername oder Passwort!";
    }
  }

  function addNews() {
    if (!loggedIn) {
      alert("Du musst eingeloggt sein, um News hinzuzufügen.");
      return false;
    }

    const title = document.getElementById("news-title").value.trim();
    const content = document.getElementById("news-content").value.trim();

    if (title && content) {
      newsItems.unshift({ title, content, timestamp: Date.now() });
      saveNewsToStorage();
      renderNews();
      newsForm.reset();
      alert("News wurde hinzugefügt!");
    } else {
      alert("Bitte Titel und Inhalt ausfüllen.");
    }

    return false;
  }

  renderNews();
</script>

</body>
</html>
