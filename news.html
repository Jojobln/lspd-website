<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LSPD News</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .news-item {
      background-color: #1a1a1a;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      color: white;
      position: relative;
    }
    .news-item h3 {
      color: #00aaff;
      margin-top: 0;
    }
    .news-item p {
      margin: 8px 0 0 0;
    }
    .delete-btn {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background-color: #f44336;
      border: none;
      padding: 5px 10px;
      color: white;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
      display: none;
    }
    #news-form {
      background-color: #1a1a1a;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      color: white;
      display: none;
    }
    #news-form label, #news-form input, #news-form textarea, #news-form button {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }
    #news-form input, #news-form textarea {
      padding: 8px;
      border-radius: 5px;
      border: none;
      font-size: 1rem;
      background-color: #333;
      color: white;
    }
    #news-form button {
      background-color: #00aaff;
      border: none;
      padding: 10px;
      cursor: pointer;
      font-weight: bold;
      color: #111;
      border-radius: 5px;
    }
    #login-area {
      background-color: #1a1a1a;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      color: white;
    }
    #login-area input {
      width: auto;
      padding: 8px;
      border-radius: 5px;
      border: none;
      font-size: 1rem;
      background-color: #333;
      color: white;
      margin-right: 10px;
    }
    #login-area button {
      background-color: #00aaff;
      border: none;
      padding: 8px 15px;
      cursor: pointer;
      font-weight: bold;
      color: #111;
      border-radius: 5px;
    }
    #message {
      color: #f55;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<header class="header">
  <div class="container nav-container">
    <h1 class="logo-text">Los Santos Police Department</h1>
    <div class="hamburger" onclick="toggleMenu()">&#9776;</div>
    <nav id="nav-menu" class="nav-menu hidden">
      <ul class="nav-links">
        <li><a href="../Uniformen/uniformen.html">Uniformen</a></li>
        <li><a href="../Fahrzeuge/fahrzeuge.html">Fahrzeuge</a></li>
        <li><a href="../Vorschriften/vorschriften.html">Dienstvorschrift</a></li>
        <li><a href="../Ränge/raenge.html">Ränge</a></li>
        <li><a href="../Divisions/divisions.html">Divisions</a></li>
        <li><a href="../Termine/termine.html">Termine</a></li>
        <li><a href="../hauptseite/index.html">Startseite</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="content-section">
  <h2>LSPD News</h2>

  <div id="news-list">
    <!-- News werden hier angezeigt -->
  </div>

  <div id="login-area">
    <p><strong>News schreiben? Bitte Benutzername und Passwort eingeben:</strong></p>
    <input type="text" id="usernameInput" placeholder="Benutzername" />
    <input type="password" id="passwordInput" placeholder="Passwort" />
    <button onclick="login()">Login</button>
    <p id="message"></p>
  </div>

  <form id="news-form" onsubmit="return addNews();">
    <label for="news-title">Titel:</label>
    <input type="text" id="news-title" required maxlength="100" />

    <label for="news-content">Inhalt:</label>
    <textarea id="news-content" rows="5" required maxlength="1000"></textarea>

    <button type="submit">News hinzufügen</button>
  </form>
</section>

<footer class="footer">
  &copy; 2025 RedState fivePD - lle Rechte vorbehalten.
</footer>

<script>
  const users = [
    { username: "kuura", password: "lspd2025" },
    { username: "pringle", password: "metrosecure" },
    { username: "justin", password: "detective123" }
  ];

  const newsList = document.getElementById("news-list");
  const newsForm = document.getElementById("news-form");
  const loginArea = document.getElementById("login-area");
  const message = document.getElementById("message");

  let loggedIn = false;
  let newsItems = [
    {title: "Willkommen bei den LSPD News", content: "Hier findest du alle aktuellen Informationen und Ankündigungen."},
  ];

  function toggleMenu() {
    document.getElementById("nav-menu").classList.toggle("hidden");
  }

  function renderNews() {
    newsList.innerHTML = "";
    newsItems.forEach((news, index) => {
      const div = document.createElement("div");
      div.classList.add("news-item");
      div.innerHTML = `<h3>${news.title}</h3><p>${news.content}</p>`;

      if(loggedIn){
        const delBtn = document.createElement("button");
        delBtn.textContent = "Löschen";
        delBtn.classList.add("delete-btn");
        delBtn.style.display = "block";
        delBtn.onclick = () => {
          if(confirm(`News "${news.title}" wirklich löschen?`)){
            newsItems.splice(index, 1);
            renderNews();
          }
        };
        div.appendChild(delBtn);
      }

      newsList.appendChild(div);
    });
  }

  function login() {
    const username = document.getElementById("usernameInput").value.trim().toLowerCase();
    const password = document.getElementById("passwordInput").value;
    const user = users.find(u => u.username === username && u.password === password);
    if (user) {
      loggedIn = true;
      message.style.color = "lightgreen";
      message.textContent = `Erfolgreich eingeloggt als ${user.username}. Du kannst jetzt News hinzufügen und löschen.`;
      loginArea.style.display = "none";
      newsForm.style.display = "block";
      renderNews();
    } else {
      message.style.color = "#f55";
      message.textContent = "Falscher Benutzername oder Passwort!";
    }
  }

  function addNews() {
    if (!loggedIn) {
      alert("Du musst eingeloggt sein, um News hinzuzufügen.");
      return false;
    }

    const title = document.getElementById("news-title").value.trim();
    const content = document.getElementById("news-content").value.trim();

    if(title && content) {
      newsItems.unshift({title, content});
      renderNews();
      newsForm.reset();
      alert("News wurde hinzugefügt!");
    } else {
      alert("Bitte Titel und Inhalt ausfüllen.");
    }

    return false; // Seitenreload verhindern
  }

  renderNews();
</script>

</body>
</html>
